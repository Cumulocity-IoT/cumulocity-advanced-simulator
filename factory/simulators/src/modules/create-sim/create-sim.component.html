<c8y-title>Create Custom Simulator</c8y-title>
<c8y-action-bar-item [placement]="'left'">
  <a [routerLink]="['']" class="btn btn-link"
    ><i class="fa fw fa-arrow-circle-o-left" style="font-size: large"></i
  ></a>
</c8y-action-bar-item>

<c8y-drop-area>
  <div style="width: 750px">
    <button
      type="button"
      class="btn btn-default"
      style="float: left"
      (click)="configureSettings = !configureSettings"
    >
      <i class="fa fa-cog"></i>&nbsp;Configure Default Settings
    </button>
    <br />
    <br />
    <div class="row" *ngIf="configureSettings">
      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultMin"></label>
          <input
            id="defaultMin"
            class="form-control"
            placeholder="default minimum"
          />
        </div>
      </div>

      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultMax"></label>
          <input
            id="defaultMax"
            class="form-control"
            placeholder="default maximum"
          />
        </div>
      </div>

      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultSteps"></label>
          <input
            id="defaultSteps"
            class="form-control"
            placeholder="default steps"
          />
        </div>
      </div>

      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultSleep"></label>
          <input
            id="defaultSleep"
            [(ngModel)]="defaultSleep"
            class="form-control"
            placeholder="default sleep"
          />
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group form-group-md">
          <div class="c8y-select-wrapper">
            <select [ngModel]="selectedConfig" (ngModelChange)="onChange($event)" class="form-control">
              <option *ngFor="let first of defaultSleepMsmtConfig">{{first}}</option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group form-group-md">
          <div class="c8y-select-wrapper">
            <select class="form-control">
              <option value="">.form-group-md</option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group form-group-md">
          <div class="c8y-select-wrapper">
            <select class="form-control">
              <option value="">.form-group-md</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <br />
    <!-- <div class="tight-grid"> -->
    <div class="row">
      <div class="col-sm-6 col-xs-6">
        <div class="form-group">
          <label for="fragment" translate>Fragment *</label>
          <input id="fragment" class="form-control" [(ngModel)]="fragment" />
        </div>
      </div>
      <div class="col-sm-6 col-xs-6">
        <div class="form-group">
          <label for="series" translate>Series *</label>
          <input name="series" class="form-control" [(ngModel)]="series" />
        </div>
      </div>
      <div class="col-sm-6 col-xs-6">
        <div class="form-group">
          <label for="min" translate="">Min</label>
          <input name="minimum" class="form-control" [(ngModel)]="minValue" />
        </div>
      </div>
      <div class="col-sm-6 col-xs-6">
        <div class="form-group">
          <label for="min" translate> Max </label>
          <input name="maximum" class="form-control" [(ngModel)]="maxValue" />
        </div>
      </div>
      <div>
        <div class="col-sm-6 col-xs-6">
          <div class="form-group">
            <label for="min" translate> Steps * </label>
            <input name="maximum" class="form-control" [(ngModel)]="steps" />
          </div>
        </div>
        <div>
          <div class="col-sm-6 col-xs-6">
            <div class="form-group">
              <label for="min" translate> Unit </label>
              <input name="maximum" class="form-control" [(ngModel)]="unit" />
            </div>
          </div>
        </div>

        <button
          type="button"
          class="btn btn-primary"
          (click)="generateSimulatorRequest()"
        >
          Generate HTTP Request
        </button>

        <button
          type="button"
          class="btn btn-primary"
          style="float: right;"
          (click)="addNewFragment()"
        >
          Add new fragment
        </button>
      </div>
    </div>

    <div class="card-inner-scroll">
      <div class="card-block">
        <textarea class="form-control" rows="6">{{
          resultTemplate | json
        }}</textarea>
      </div>
    </div>

    <a

          [href]="fileUrl" 
          download="HTTP_settings.json"
          class="btn btn-primary"
          (click)="downloadJSON()"
          style="float: right;"
        >
          Download JSON Config
  </a>
  </div>
</c8y-drop-area>
