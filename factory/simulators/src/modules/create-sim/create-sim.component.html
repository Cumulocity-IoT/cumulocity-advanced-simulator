<c8y-title>{{ simulatorName }}</c8y-title>
<c8y-action-bar-item [placement]="'left'">
  <a [routerLink]="['']" class="btn btn-link"
    ><i class="fa fw fa-arrow-circle-o-left" style="font-size: large"></i
  ></a>
</c8y-action-bar-item>

<c8y-drop-area>
  <div class="col-lg-6">
    <button
      type="button"
      class="col-sm-4 col-md-6 col-xs-6"
      class="btn btn-default"
      
      (click)="configureSettings = !configureSettings"
    >
      <i class="fa fa-cog"></i>&nbsp;Configure Default Settings
    </button>


    <button
      class="col-sm-4 col-md-6 col-xs-6"
      type="button"
      class="btn btn-default"
      (click)="configureMeasurements = !configureMeasurements"
    >
      <i class="fa fa-cog"></i>&nbsp;Configure Measurements
    </button>

    <button
      class="col-sm-4 col-md-6 col-xs-6"
      type="button"
      class="btn btn-default"
      (click)="configureAlarms = !configureAlarms"
    >
      <i class="fa fa-cog"></i>&nbsp;Configure Alarms
    </button>

    <button
      type="button"
      class="col-sm-4 col-md-6 col-xs-6"
      class="btn btn-default"
      (click)="configureEvents = !configureEvents"
    >
      <i class="fa fa-cog"></i>&nbsp;Configure Events
    </button>

    <button
    type="button"
    class="col-sm-4 col-md-6 col-xs-6"
    class="btn btn-default"
    (click)="configureOperations = !configureOperations"
  >
    <i class="fa fa-cog"></i>&nbsp;Configure Operations
  </button>

    <br />
    <br />
    <div class="row" *ngIf="configureSettings">
      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultMin"></label>
          <input
            id="defaultMin"
            class="form-control"
            placeholder="default minimum"
            [ngModel]="defaultMin"
            (change)="onChangeMin($event)"
          />
        </div>
      </div>

      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultMax"></label>
          <input
            id="defaultMax"
            class="form-control"
            placeholder="default maximum"
            [ngModel]="defaultMax"
            (change)="onChangeMax($event)"
          />
        </div>
      </div>

      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultSteps"></label>
          <input
            id="defaultSteps"
            class="form-control"
            placeholder="default steps"
            [ngModel]="defaultSteps"
            (change)="onChangeSteps($event)"
          />
        </div>
      </div>

      <div class="col-sm-3 col-xs-6">
        <div class="form-group">
          <label for="defaultSleep"></label>
          <input
            id="defaultSleep"
            [(ngModel)]="defaultSleep"
            class="form-control"
            placeholder="default sleep"
          />
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group form-group-md">
          <div class="c8y-select-wrapper">
            <select
              [ngModel]="selectedConfig"
              (ngModelChange)="onChange($event)"
              class="form-control"
            >
              <option *ngFor="let first of defaultSleepMsmtConfig">
                {{ first }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group form-group-md">
          <div class="c8y-select-wrapper">
            <select
              class="form-control"
              [ngModel]="selectedAlarmConfig"
              (ngModelChange)="onChangeAlarmConfig($event)"
            >
              <option *ngFor="let first of defaultAlarmsConfig">
                {{ first }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group form-group-md">
          <div class="c8y-select-wrapper">
            <select
              class="form-control"
              [ngModel]="selectedEventConfig"
              (ngModelChange)="onChangeEventConfig($event)"
            >
              <option *ngFor="let first of defaultEventsConfig">
                {{ first }}
              </option>
            </select>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <label class="c8y-switch">
          <input
            type="checkbox"
            [checked]="randomSelected"
            (change)="randomSelected = !randomSelected"
          />
          <span></span> Random ON
        </label>
      </div>
    </div>
    <br />
    <!-- <div class="tight-grid"> -->
    <div class="row">
      <div class="col-sm-6 col-xs-6">
        <div class="form-group">
          <label for="fragment" translate>Fragment *</label>
          <input id="fragment" class="form-control" [(ngModel)]="fragment" />
        </div>
      </div>
      <div class="col-sm-6 col-xs-6">
        <div class="form-group">
          <label for="series" translate>Series *</label>
          <input name="series" class="form-control" [(ngModel)]="series" />
        </div>
      </div>
      <div class="col-sm-6 col-xs-6">
        <div class="form-group" *ngIf="!toDisplay && !toAddMsmtOrSleep">
          <label for="min" translate="">Min *</label>
          <input name="minimum" class="form-control" [(ngModel)]="minValue" />
        </div>
      </div>
      <div class="col-sm-6 col-xs-6">
        <div class="form-group" *ngIf="!toDisplay && !toAddMsmtOrSleep">
          <label for="min" translate> Max *</label>
          <input name="maximum" class="form-control" [(ngModel)]="maxValue" />
        </div>
      </div>
      <div>
        <div class="col-sm-6 col-xs-6">
          <div class="form-group" *ngIf="!toDisplay && !toAddMsmtOrSleep">
            <label for="min" translate> Steps * </label>
            <input name="maximum" class="form-control" [(ngModel)]="steps" />
          </div>
          <div class="form-group" *ngIf="toDisplay || toAddMsmtOrSleep">
            <label for="min" translate> Value *</label>
            <input name="maximum" class="form-control" [(ngModel)]="value" />
          </div>
        </div>
        <div>
          <div class="col-sm-6 col-xs-6">
            <div class="form-group">
              <label for="min" translate> Unit *</label>
              <input name="maximum" class="form-control" [(ngModel)]="unit" />
            </div>
          </div>
        </div>
      </div>
      <button
        type="button"
        class="btn btn-primary"
        *ngIf="!toAddMsmtOrSleep"
        style="margin-left: 12px"
        (click)="addNewFragment()"
      >
        Add fragment
      </button>

      <button
        *ngIf="toDisplay"
        type="button"
        class="btn btn-primary"
        style="margin-left: 12px"
        (click)="editCurrentFragment()"
      >
        Update fragment
      </button>

      <button
        *ngIf="toAddMsmtOrSleep"
        type="button"
        class="btn btn-primary"
        style="margin-left: 12px"
        (click)="insertCurrentFragment()"
      >
        Insert fragment
      </button>

      <button
        type="button"
        class="btn btn-primary"
        style="float: right; margin-right: 12px"
        (click)="reset()"
      >
        Reset
      </button>
      <br />
      <br />

      <div *ngIf="toAddMsmtOrSleep">
        <div class="col-md-6">
          <div class="form-group">
            <input name="defSl" placeholder="Sleep" class="form-control" [(ngModel)]="sleepVal" />
          </div>
        </div>
        <div class="col-md-6">
          <button
            type="button"
            class="btn btn-primary"
            style="float: right;"
            (click)="insertSleep()"
          >
            Insert Sleep
          </button>
        </div>
        <br />
        <br />
        <br />
      </div>

      <div *ngIf="configureAlarms">
        <div class="col-sm-3">
          <div class="form-group form-group-md">
            <div class="c8y-select-wrapper">
              <select
                class="form-control"
                [ngModel]="selectedAlarmCategory"
                (ngModelChange)="onChangeOfAlarm($event)"
              >
                <option *ngFor="let item of alarmCategories">
                  {{ item.category }}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="col-sm-3 col-xs-6">
          <div class="form-group">
            <input
              name="minimum"
              class="form-control"
              placeholder="Alarm Type"
              [(ngModel)]="selectedAlarmType"
            />
          </div>
        </div>

        <div class="col-sm-3 col-xs-6">
          <div class="form-group">
            <input
              name="minimum"
              class="form-control"
              placeholder="Alarm Text"
              [(ngModel)]="selectedAlarmText"
            />
          </div>
        </div>

        <div class="col-sm-3 col-xs-6">
          <div class="form-group">
            <input
              name="minimum"
              class="form-control"
              placeholder="Steps"
              [(ngModel)]="alarmSteps"
            />
          </div>
        </div>
        <br />
        <button
          type="button"
          class="btn btn-primary"
          style="margin-left: 12px"
          (click)="addAlarmToArray()"
        >
          Add Alarm
        </button>
      </div>
      <br />
      <br *ngIf="configureAlarms" />
      <div *ngIf="configureEvents">
        <div class="col-sm-3">
          <div class="form-group form-group-md">
            <div class="c8y-select-wrapper">
              <select
                class="form-control"
                [ngModel]="selectedEventCategory"
                (ngModelChange)="onChangeEvent($event)"
              >
                <option *ngFor="let item of eventCategories">
                  {{ item.category }}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div
          class="col-sm-3 col-xs-6"
          *ngIf="selectedEventCategory === eventCategories[0].category"
        >
          <div class="form-group">
            <input
              name="minimum"
              class="form-control"
              placeholder="Event Type"
              [(ngModel)]="selectedEventType"
            />
          </div>
        </div>

        <div
          class="col-sm-3 col-xs-6"
          *ngIf="selectedEventCategory === eventCategories[0].category"
        >
          <div class="form-group">
            <input
              name="minimum"
              class="form-control"
              placeholder="Event Text"
              [(ngModel)]="selectedEventText"
            />
          </div>
        </div>

        <div class="col-sm-3 col-xs-6">
          <div class="form-group">
            <input
              name="minimum"
              class="form-control"
              placeholder="Event Steps"
              [(ngModel)]="eventSteps"
            />
          </div>
        </div>
        <br />

        <ng-container
          *ngIf="selectedEventCategory !== eventCategories[0].category"
        >
          <br />
          <br />
          <div class="col-sm-3 col-xs-6">
            <div class="form-group">
              <input
                name="minimum"
                class="form-control"
                placeholder="Latitude"
                [(ngModel)]="selectedLatitude"
              />
            </div>
          </div>

          <div class="col-sm-3 col-xs-6">
            <div class="form-group">
              <input
                name="minimum"
                class="form-control"
                placeholder="Longitude"
                [(ngModel)]="selectedLongitude"
              />
            </div>
          </div>

          <div class="col-sm-3 col-xs-6">
            <div class="form-group">
              <input
                name="minimum"
                class="form-control"
                placeholder="Altitude"
                [(ngModel)]="selectedAltitude"
              />
            </div>
          </div>

          <div class="col-sm-3 col-xs-6">
            <div class="form-group">
              <input
                name="minimum"
                class="form-control"
                placeholder="Accuracy"
                [(ngModel)]="selectedAccuracy"
              />
            </div>
          </div>
          <br />
          <br />
        </ng-container>

        <button
          type="button"
          class="btn btn-primary"
          style="margin-left: 12px"
          (click)="addEventToArray()"
        >
          Add Event
        </button>
      </div>
      <br *ngIf="configureEvents" />

      <button
        type="button"
        class="btn btn-primary"
        *ngIf="!toDisplay && !toAddMsmtOrSleep"
        style="position: absolute; left: 35%"
        (click)="generateSimulatorRequest()"
      >
        Generate HTTP Request
      </button>
      <br />
      <br />

      <div class="card-inner-scroll">
        <div class="card-block">
          <textarea class="form-control" rows="6">{{
            resultTemplate | json
          }}</textarea>
        </div>
      </div>

      <a
        [href]="fileUrl"
        download="HTTP_settings.json"
        class="btn btn-primary"
        (click)="downloadJSON()"
        style="float: right"
      >
        Download JSON Config
      </a>
    </div>
  </div>
  <div class="col-lg-6" style="overflow: scroll; height: 80vh">
    <!-- <div *ngIf="displayChart">
      <app-simulator-chart
        [lineChartData]="lineChartData"
        [lineChartLabels]="lineChartLabels"
        [lineChartLegend]="lineChartLegend"
        [lineChartType]="lineChartType"
        [lineChartColors]="lineChartColors"
        [lineChartPlugins]="lineChartPlugins"
      ></app-simulator-chart>
    </div> -->

    <app-simulator-details
      [commandQueue]="commandQueue"
      (currentValue)="updateCurrentFragment($event)"
      (currentCommandQueue)="updateCommandQueue($event)"
      (insertSleepOrFragment)="insertSleepOrFragment($event)"
    ></app-simulator-details>
  </div>
</c8y-drop-area>
